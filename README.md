# Описание смарт контракта
Данный смарт контракт является контрактом оплаты, который позволяет совершать оплату и возврат оплаты. Он использует перечисление (enum) для отслеживания статуса оплаты, который может быть: ожидание, оплачено или возвращено.

Контракт содержит две функции: makePayment() и refundPayment(). Функция makePayment() используется для осуществления оплаты, при этом проверяется, что статус оплаты находится в состоянии ожидания. Если это так, то статус меняется на оплачено и создается событие LogNewPayment, которое сообщает об успешной оплате.

Функция refundPayment() используется для возврата оплаты. Она проверяет, что оплата была сделана ранее, а затем меняет статус на возвращено и осуществляет возврат средств на счет отправителя.

Также в контракте есть функции getStatus() и getPaymentStatus(). Функция getStatus() используется для преобразования значения перечисления в соответствующую строку, которая затем используется в функции getPaymentStatus() для получения текущего статуса оплаты в виде строки.

# Бизнес-задача
Смарт контракты являются ключевой технологией блокчейн-технологии, которая позволяет автоматизировать процессы и повышать прозрачность и безопасность взаимодействия между участниками. Контракт оплаты представляет собой важный компонент в экосистеме бизнеса, который может быть использован для обеспечения безопасных и надежных транзакций между продавцом и покупателем. Такой контракт может использоваться для продажи товаров или услуг, где покупатель может сделать оплату только после того, как продавец выполнит свою часть договора. Контракт оплаты также может быть использован для автоматического возврата средств в случае, если услуга не была оказана или товар не был доставлен вовремя.

Предположим, что вы являетесь владельцем веб-сайта, на котором продаете цифровые товары, такие как курсы обучения, электронные книги, музыкальные треки и т.д. Вы хотите убедиться, что только зарегистрированные пользователи могут приобретать товары на вашем сайте, и что оплата происходит только после того, как пользователь получит товар.

Для решения этой задачи можно использовать контракт оплаты, который будет связан с каждым товаром на вашем сайте. Когда пользователь выбирает товар для покупки, он будет перенаправлен на страницу оплаты, где ему будет предложено ввести свои данные и подтвердить покупку.

После того, как пользователь совершит оплату, контракт оплаты изменит статус оплаты на "оплачено", а пользователь получит доступ к загружаемому файлу или курсу обучения. Если пользователь не получил товар или имеет претензии к его качеству, он сможет запросить возврат средств, и контракт оплаты автоматически вернет ему сумму оплаты.

Таким образом, контракт оплаты позволяет автоматизировать процесс оплаты и возврата средств, обеспечивая безопасность и доверие между продавцом и покупателем.

# Описание тестов
## Тест на проверку начального статуса платежа - "Pending":
### Описание: проверяет, что при развертывании контракта, его статус платежа равен "Pending".
### Ожидаемый результат: статус платежа равен "Pending".
### Шаги:
* Получаем экземпляр контракта Payment.
* Получаем статус платежа.
* Сравниваем полученный статус с ожидаемым "Pending".
## Тест на проверку успешного платежа:
### Описание: проверяет, что пользователь может успешно совершить платеж.
### Ожидаемый результат: статус платежа равен "Paid".
### Шаги:
* Получаем экземпляр контракта Payment.
* Отправляем платеж от аккаунта accounts[0].
* Получаем статус платежа.
* Сравниваем полученный статус с ожидаемым "Paid".
## Тест на проверку запрета повторного платежа:
### Описание: проверяет, что повторный платеж от одного и того же аккаунта запрещен.
### Ожидаемый результат: получение сообщения об ошибке "Expected revert not received".
### Шаги:
* Получаем экземпляр контракта Payment.
* Отправляем платеж от аккаунта accounts[0].
* Пытаемся отправить еще один платеж от этого же аккаунта.
* Получаем ошибку, содержащую сообщение "Payment has already been made".
## Тест на проверку возможности возврата платежа:
### Описание: проверяет, что пользователь может запросить возврат платежа и получить его.
### Ожидаемый результат: статус платежа равен "Refunded".
### Шаги:
* Получаем экземпляр контракта Payment.
* Отправляем платеж от аккаунта accounts[0].
* Запрашиваем возврат платежа от того же аккаунта.
* Получаем статус платежа.
* Сравниваем полученный статус с ожидаемым "Refunded".
## Тест на проверку запрета возврата платежа, если он еще не был совершен:
### Описание: проверяет, что возврат платежа запрещен до его совершения.
### Ожидаемый результат: получение сообщения об ошибке "Expected revert not received".
### Шаги:
* Получаем экземпляр контракта Payment.
* Пытаемся запросить возврат платежа от аккаунта accounts[0].
* Получаем ошибку, содержащую сообщение "Payment has not been made yet".
 
# Пример деплоя и тестов
![image](https://user-images.githubusercontent.com/44007878/227723818-e9cba889-9617-4f90-a83e-c6e73e7bed59.png)
![image](https://user-images.githubusercontent.com/44007878/227723840-81b39634-810f-46dd-8575-6bdd37ba0b45.png)
![image](https://user-images.githubusercontent.com/44007878/227723795-db30ca5f-5e20-4ae2-acc4-17eb12e00e9e.png)
